<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Outcome Weights of Treatment Effect Estimators • OutcomeWeights</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="katex-auto.js"></script><script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Outcome Weights of Treatment Effect Estimators">
<meta name="description" content="Many treatment effect estimators can be written as weighted outcomes. These weights have established use cases like checking covariate balancing via packages like cobalt. This package takes the original estimator objects and outputs these outcome weights. It builds on the general framework of Knaus (2024) &lt;doi:10.48550/arXiv.2411.11559&gt;. This version is compatible with the grf package and provides an internal implementation of Double Machine Learning.">
<meta property="og:description" content="Many treatment effect estimators can be written as weighted outcomes. These weights have established use cases like checking covariate balancing via packages like cobalt. This package takes the original estimator objects and outputs these outcome weights. It builds on the general framework of Knaus (2024) &lt;doi:10.48550/arXiv.2411.11559&gt;. This version is compatible with the grf package and provides an internal implementation of Double Machine Learning.">
<meta property="og:image" content="/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">OutcomeWeights</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="articles/NB_OutcomeWeights_AIPW_401k.html">AIPW vs. RA and IPW</a></li>
    <li><a class="dropdown-item" href="articles/Theory_in_action_outcome_weights.html">Theory in action</a></li>
    <li><a class="dropdown-item" href="articles/Application_average_401k.html">Application 401(k) - average effects</a></li>
    <li><a class="dropdown-item" href="articles/Application_heterogeneous_401k.html">Application 401(k) - heterogeneous effects</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">📖 Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MCKnaus/OutcomeWeights"><span class="fa fa-github"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="outcomeweights-">OutcomeWeights <a class="anchor" aria-label="anchor" href="#outcomeweights-"></a>
</h1>
</div>
<!-- badges: start -->

<p>This R package calculates the outcome weights of <a href="https://arxiv.org/abs/2411.11559" class="external-link">Knaus (2024)</a>. Its use is illustrated in the vignettes of the <a href="https://mcknaus.github.io/OutcomeWeights/" class="external-link">package website</a>.</p>
<p>The core functionality is the <code><a href="reference/get_outcome_weights.html">get_outcome_weights()</a></code> method implementing the theoretical result in Proposition 1 of the paper. It shows that the outcome weights vector can be obtained in the general form <span class="math inline">\boldsymbol{\omega'} = (\boldsymbol{\tilde{Z}'\tilde{D}})^{-1} \boldsymbol{\tilde{Z}'T}</span> where <span class="math inline">\boldsymbol{\tilde{Z}}</span>, <span class="math inline">\boldsymbol{\tilde{D}}</span> and <span class="math inline">\boldsymbol{T}</span> are pseudo-instrument, pseudo-treatment and the transformation matrix, respectively.</p>
<p>In the future it should be compatible with as many estimated R objects as possible.</p>
<p>The package can be downloaded from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"OutcomeWeights"</span><span class="op">)</span></span></code></pre></div>
<p>The package is work in progress. Find here the current state (suggestions welcome):</p>
<div class="section level3">
<h3 id="in-progress">In progress<a class="anchor" aria-label="anchor" href="#in-progress"></a>
</h3>
<ul class="task-list">
<li>
<label><input type="checkbox">Compatibility with <a href="https://grf-labs.github.io/grf/" class="external-link"><code>grf</code></a> package</label>
<ul class="task-list">
<li><label><input type="checkbox" checked><code>causal_forest()</code> outcome weights for CATE</label></li>
<li><label><input type="checkbox" checked><code>instrumental_forest()</code> outcome weights CLATE</label></li>
<li><label><input type="checkbox" checked><code>causal_forest()</code> outcome weights for ATE from <code>average_treatment_effect()</code></label></li>
<li><label><input type="checkbox">All outcome weights for average parameters compatible with <code>average_treatment_effect()</code></label></li>
</ul>
</li>
<li>
<label><input type="checkbox">Package internal Double ML implementation handling the required outcome smoother matrices</label>
<ul class="task-list">
<li><label><input type="checkbox" checked>Nuisance parameter estimation based on honest random forest (<code>regression_forest()</code> of <code>grf</code> package)</label></li>
<li><label><input type="checkbox" checked><code><a href="reference/dml_with_smoother.html">dml_with_smoother()</a></code> function runs for PLR, PLR-IV, AIPW-ATE, and Wald_AIPW and is compatible with <code><a href="reference/get_outcome_weights.html">get_outcome_weights()</a></code></label></li>
<li><label><input type="checkbox">Add more Double ML estimators</label></li>
<li><label><input type="checkbox">Add support for more smoothers</label></li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="envisioned-features">Envisioned features<a class="anchor" aria-label="anchor" href="#envisioned-features"></a>
</h3>
<ul class="task-list">
<li>
<label><input type="checkbox">Compatibility with <a href="https://docs.doubleml.org/stable/index.html" class="external-link"><code>DoubleML</code></a> (this is a non-trivial task as the <code>mlr3</code> environment it builds on does not provide smoother matrices)</label>
<ul class="task-list">
<li><label><input type="checkbox">Extract the smoother matrices of <code>mlr3</code> available, where possible</label></li>
<li><label><input type="checkbox">Make the smoother matrices of <code>mlr3</code> accessible within DoubleML</label></li>
<li><label><input type="checkbox">Write <code><a href="reference/get_outcome_weights.html">get_outcome_weights()</a></code> method for DoubleML estimators</label></li>
</ul>
</li>
<li><label><input type="checkbox">Collect packages where weights could be extracted and implement them</label></li>
</ul>
<p>The development version is available using the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span>repo<span class="op">=</span><span class="st">"MCKnaus/OutcomeWeights"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Knaus, M. C. (2024). Treatment effect estimators as weighted outcomes, <a href="https://arxiv.org/abs/2411.11559" class="external-link">arXiv:2411.11559</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=OutcomeWeights" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/MCKnaus/OutcomeWeights/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/MCKnaus/OutcomeWeights/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing OutcomeWeights</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael C. Knaus <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7328-1363" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=OutcomeWeights" class="external-link"><img src="https://www.r-pkg.org/badges/version/OutcomeWeights" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" class="external-link"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="License"></a></li>
<li><a href="https://CRAN.R-project.org/package=OutcomeWeights" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/OutcomeWeights" alt="Downloads_Total"></a></li>
<li><a href="https://CRAN.R-project.org/package=OutcomeWeights" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/OutcomeWeights" alt="Downloads_Monthly"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project_Status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael C. Knaus.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
